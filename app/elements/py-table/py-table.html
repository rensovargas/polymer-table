<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">

<polymer-element name="py-table"  attributes="data url">
  <template>
    <link href="py-table.css" rel="stylesheet" type="text/css">
    <core-ajax auto url="{{url}}" handleAs="json" on-core-response="{{ajaxResponse}}"></core-ajax>
    <div class="table">
      <div class="headers">
        <h2>headers</h2>
        <template repeat="{{header in headers}}">
          <div>{{header}}</div>
        </template>
      </div>
      <h2>rows</h2>
      <template repeat="{{ row in data }}">
        <div class="row">
          <template repeat="{{ key in row | keys }}">
            <py-cell data="{{row[key]}}" row="{{ row | index(data)}}" col="{{columns[key]}}"></py-cell>
          </template>
        </div>
      </template>
    </div>
  </template>
  <script src="py-table.js"></script>
</polymer-element>